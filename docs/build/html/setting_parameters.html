<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Setting parameters &mdash; PEACOC 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=f6245a2f"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Preprocessing" href="preprocessing.html" />
    <link rel="prev" title="Getting started" href="getting_started.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            PEACOC
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setting parameters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-parameters-are-handled">How parameters are handled</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-template">Create a template</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overwriting-defaults">Overwriting defaults</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-parameter-file-for-a-recording">Create a parameter file for a recording</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="preprocessing.html">Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="LFP_to_bursts.html">EA detection and classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="output.html">Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="access_results.html">Accessing results</a></li>
<li class="toctree-l1"><a class="reference internal" href="access_metadata.html">Accessing metadata and diagnostics metrics</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PEACOC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Setting parameters</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/setting_parameters.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="setting-parameters">
<span id="id1"></span><h1>Setting parameters<a class="headerlink" href="#setting-parameters" title="Permalink to this heading"></a></h1>
<section id="how-parameters-are-handled">
<span id="param-intro"></span><h2>How parameters are handled<a class="headerlink" href="#how-parameters-are-handled" title="Permalink to this heading"></a></h2>
<p>Parameters are handled at two different levels. The <strong>default parameters</strong> are located at
<em>PEACOC/config/configAnalysis.yml</em> and look like this:</p>
<a class="reference internal image-reference" href="_images/configAnalysis.png"><img alt="_images/configAnalysis.png" class="align-center" src="_images/configAnalysis.png" style="width: 500px;" /></a>
<p>Behind each parameter and default value there is an explanation of what it is good for.
Make a change to this file only if you are absolutely sure that you want this change for all
for all of your analyses. For now, leave it untouched.
In the next sections we will create experiment and recording specific parameter files where you
can overwrite the defaults.</p>
</section>
<section id="create-a-template">
<span id="param-template"></span><h2>Create a template<a class="headerlink" href="#create-a-template" title="Permalink to this heading"></a></h2>
<p>We found it very useful and time-saving to create parameter templates for whole experiments, i.e. a larger number of
recordings to which the same parameters should be applied.
To work with templates, first create a directory where you would like to store your templates:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">mkdir</span> <span class="n">my_templates</span>
</pre></div>
</div>
<p>Then copy a templates from PEACOC/templates to your directory. On Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">cp</span> <span class="n">PEACOC</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">template__runparams</span><span class="o">.</span><span class="n">yml</span> <span class="n">my_templates</span><span class="o">/</span><span class="n">template_experiment1</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>On Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">cp</span> <span class="n">PEACOC</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">template_runparamsWin</span><span class="o">.</span><span class="n">yml</span> <span class="n">my_templates</span><span class="o">/</span><span class="n">template_experiment1</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>Open the copied template (in this case <em>my_templates/template_experiment1.yml</em>), it looks like this:</p>
<a class="reference internal image-reference" href="_images/my_template_unedited.png"><img alt="_images/my_template_unedited.png" class="align-center" src="_images/my_template_unedited.png" style="width: 500px;" /></a>
<p>All entries in CAPITALS are place-holders, which we will now successively replace according to our setup and
preferences:</p>
<a class="reference internal image-reference" href="_images/my_template_findReplace2.png"><img alt="_images/my_template_findReplace2.png" class="align-center" src="_images/my_template_findReplace2.png" style="width: 500px;" /></a>
<p id="replacement-params">Make the following replacements:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PACKAGE_DIR</span></code>: where you cloned/downloaded the toolbox, e.g.: <code class="docutils literal notranslate"><span class="pre">home/weltgeischt/PEACOC_tutorial</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATADIR</span></code> → where you want your results saved, e.g.: <code class="docutils literal notranslate"><span class="pre">home/weltgeischt/PEACOC_tutorial/my_results/data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIGDIR</span></code>: where you want the figures saved, e.g.: <code class="docutils literal notranslate"><span class="pre">home/weltgeischt/PEACOC_tutorial/my_results/figures</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SOURCEDIR</span></code>: directory in which you keep your raw data files, e.g.: <code class="docutils literal notranslate"><span class="pre">home/weltgeischt/PEACOC_tutorial/example_data</span></code></p></li>
</ul>
<section id="overwriting-defaults">
<span id="overwrite-defaults"></span><h3>Overwriting defaults<a class="headerlink" href="#overwriting-defaults" title="Permalink to this heading"></a></h3>
<p>You can also overwrite default parameters at the template level. You do this by specifying the parameter as a sub-entry
below <em>setparams</em> (red arrows in example below).
Here we set the offset for spike detection (<em>EdDetection</em>, Ed for epileptiform discharge) to 300 s, i.e. we exclude
the first 5 min of the recording from spike detection:</p>
<a class="reference internal image-reference" href="_images/my_template_editParameters.png"><img alt="_images/my_template_editParameters.png" class="align-center" src="_images/my_template_editParameters.png" style="width: 500px;" /></a>
<p>At this stage we have created a template for a big batch of recordings.</p>
</section>
</section>
<section id="create-a-parameter-file-for-a-recording">
<span id="param-rec"></span><h2>Create a parameter file for a recording<a class="headerlink" href="#create-a-parameter-file-for-a-recording" title="Permalink to this heading"></a></h2>
<p>Now we will create a parameter file specific for a single recording session. This will be the input fort the commandline
tool. Herey ou will learn how to generate a specific parameter file from the template and how edit it.
But first, let’s create a directory where you can store all your specific parameter files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">mkdir</span> <span class="n">run_params</span>
</pre></div>
</div>
<p>Using <em>generate_ymlsetup</em> you can automatically generate the recording specific parameter file and
set the recording id and source file from which to import the raw data (it basically does a find-replace for
<code class="docutils literal notranslate"><span class="pre">ANIMAL_BLOCK_ELECTRODE</span></code> and <code class="docutils literal notranslate"><span class="pre">THIS_SOURCE_FILE</span></code> in your template).
First, you enter the toolbox and call python or ipython:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">cd</span> <span class="n">PEACOC</span>
<span class="o">&gt;</span> <span class="n">ipython</span>
</pre></div>
</div>
<p>In python you can now generate your recording specific parameter file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">core.helpers</span> <span class="kn">import</span> <span class="n">generate_ymlsetup</span>
<span class="n">template_path</span> <span class="o">=</span> <span class="s1">&#39;/home/weltgeischt/PEACOC_tutorial/my_templates/template_experiment1.yml&#39;</span>
<span class="n">rec_id</span> <span class="o">=</span> <span class="s1">&#39;my_recording&#39;</span> <span class="c1"># I recommend using animalID_elecID_recID (eg AN115_El2_rec5)</span>
<span class="n">datasource</span> <span class="o">=</span> <span class="s1">&#39;my_example_data.smr&#39;</span>
<span class="n">setuppath</span> <span class="o">=</span> <span class="s1">&#39;/home/weltgeischt/PEACOC_tutorial/run_params/</span><span class="si">%s</span><span class="s1">_params.yml&#39;</span><span class="o">%</span><span class="n">rec_id</span>
<span class="n">generate_ymlsetup</span><span class="p">(</span><span class="n">rec_id</span><span class="p">,</span> <span class="n">datasource</span><span class="p">,</span><span class="n">template_path</span><span class="p">,</span><span class="n">setuppath</span><span class="o">=</span><span class="n">setuppath</span><span class="p">)</span>
<span class="n">exit</span><span class="p">()</span> <span class="c1">#to leave python</span>
</pre></div>
</div>
<p>In this case <em>rec_id</em> is the id of the recording. I recommend to give it some meaningful name specifying the animal, electrode
and number of recording. You can <em>download this example .smr file_</em> to replicate what happens
in this tutorial.
The variable <em>setuppath</em> specifies where the recording specific parameter file will be saved.
Et voilà, now you have created your recording specific parameter file at <em>run_params/my_recording_params.yml</em>.</p>
<p>You can edit further edit your recording specific parameter file by hand in the same way as :ref:` described previously for the template &lt;overwrite_defaults&gt;`.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Have a look at <em>PEACOC/examples/generate_paramfile.py</em> for creating several parameter files
in a loop.</p>
</div>
<p><strong>Alternative</strong>: If you don’t like python, you can of course find/replace <code class="docutils literal notranslate"><span class="pre">ANIMAL_BLOCK_ELECTRODE</span></code> and <code class="docutils literal notranslate"><span class="pre">THIS_SOURCE_FILE</span></code> by hand too.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="getting_started.html" class="btn btn-neutral float-left" title="Getting started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="preprocessing.html" class="btn btn-neutral float-right" title="Preprocessing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Katharina Heining.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>